<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.fluidplayer.com/v2/current/fluidplayer.min.css" type="text/css" />
    <script src="fluidplayer.js"></script>
</head>
<style>
    body {
        margin: 0
    }

    .player {
        -webkit-transition: width 3s, height 3s, margin 3s, left 2s;
        transition: width 3s, height 3s, margin 3s, left 2s;
    }

    /* The device with borders */
    .smartphone {
        position: relative;
        width: 360px;
        height: 640px;
        margin: auto;
        border: 16px black solid;
        border-top-width: 60px;
        border-bottom-width: 60px;
        border-radius: 36px;
        overflow: hidden;
    }

    /* The horizontal line on the top of the device */
    .smartphone:before {
        content: '';
        display: block;
        width: 60px;
        height: 5px;
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #333;
        border-radius: 10px;
    }

    /* The circle on the bottom of the device */
    .smartphone:after {
        content: '';
        display: block;
        width: 35px;
        height: 35px;
        position: absolute;
        left: 50%;
        bottom: -65px;
        transform: translate(-50%, -50%);
        background: #333;
        border-radius: 50%;
    }

    /* The screen (or content) of the device */
    .smartphone .content {
        width: 360px;
        height: 640px;
        background: white;
    }
</style>

<body>
    <div class="smartphone">
        <div class="content">
            <div id="wrapper" style="width:100%">
                <div id="player" class="player" style="width:100%;height:100%">
                    <video id="video-id" autoplay muted>
                        <source src="video.mp4" type="video/mp4" />
                    </video>
                </div>
            </div>
        </div>
    </div>

    <script>
        var tapOnVideo = function () {

            if (document.getElementById('sidebar') || document.getElementById('header')) {
                console.log('ya existen las divs')
            } else {
                /*
                #TODO:
                    • Dejar Divs exactamente iguales al dar click en cerrar
                    • Pasar todo esto a una funcion mas organizada
                */
                video.play()
                var wrapper = document.getElementById('wrapper')
                var player = document.getElementById('player')
                var header = document.createElement('div')
                var sidebarButton = document.createElement('div')
                var closeButton = document.createElement('div')
                var hamburgerLine = document.createElement('div')
                var sidebar = document.createElement('div')
                var logo = document.createElement('img')

                sidebar.style =
                    'height:100%;position:absolute;width:70%;background:black;z-index:99;left:-255px;transition:left 1s ease-in-out, right 1s ease-in-out'
                sidebar.id = 'sidebar'

                sidebarButton.style = 'width:30px;height:30px;padding:20px 0 0 15px;float:left'

                closeButton.style = 'float:right;width:30px;height:30px;background:red;margin:15px'

                hamburgerLine.style = 'background:red;height:4px;width:100%;margin-bottom:4px'

                header.id = "header"
                header.style =
                    'width:100%;height:60px;background:black;border-bottom: 1px solid red;text-align: center;'

                logo.src = 'capitana_marvel/logo.png'
                logo.style = 'width:130px;margin-left: 20px;'

                wrapper.style = 'position:absolute;background:black;height:100%'

                // efecto achicarse
                player.style.height = '100%'
                player.style.height = '230px'

                sidebarButton.appendChild(hamburgerLine)
                sidebarButton.appendChild(hamburgerLine.cloneNode(true))
                sidebarButton.appendChild(hamburgerLine.cloneNode(true))


                // BANNERS

                var banners_container = document.createElement('div')

                var banner1 = document.createElement('div')
                var banner1_image = document.createElement('img')
                var banner1_button = document.createElement('img')

                banner1.style = 'width:100%'
                banner1_image.src = 'capitana_marvel/banner.png'
                banner1_image.style = 'width:100%'

                var banner1 = document.createElement('div')
                var banner1_image = document.createElement('img')
                var banner1_button = document.createElement('img')

                banner1.style = 'width:100%'
                banner1_image.src = 'capitana_marvel/banner.png'
                banner1_image.style = 'width:100%'


                banner1.appendChild(banner1_image)

                banners_container.appendChild(banner1)

                header.appendChild(closeButton)
                header.appendChild(sidebarButton)
                header.appendChild(logo)
                wrapper.insertBefore(sidebar, wrapper.firstChild)
                wrapper.insertBefore(header, wrapper.firstChild);
                wrapper.appendChild(banners_container)

                sidebarButton.addEventListener('click', function () {
                    // show/hide sidebar
                    if (sidebar.style.left === '0px') {
                        sidebar.style.left = '-255px'
                    } else {
                        sidebar.style.left = '0px'
                    }

                })

                closeButton.addEventListener('click', function () {
                    // close everything
                    sidebar.remove()
                    header.remove()
                    banners_container.remove()
                    player.style = 'height:100%;width:100%'
                    wrapper.style = 'width:100%'
                })

            }

        }

        var options = {
            layoutControls: {
                fillToContainer: true,
                persistentSettings: {
                    volume: false
                },
                autoPlay: true,
                mute: true,
                playerInitCallback: (function () {
                    var videoPlayer = document.getElementById('video-id')
                    videoPlayer.addEventListener('click', tapOnVideo)
                })
            }
        }
        var video = fluidPlayer("video-id", options);
    </script>
</body>

</html>